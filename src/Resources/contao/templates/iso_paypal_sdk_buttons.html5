<script src="https://www.paypal.com/sdk/js?client-id=<?= $this->clientId; ?>&currency=<?= $this->currency; ?><?php if ($this->disableFunding): ?>&disable-funding=<?= $this->disableFunding ?><?php endif; ?>"></script>
<?php /** @var \Contao\FrontendTemplate $this */ ?>
<div id="paypal-button-container"></div>

<!-- Add the checkout buttons, set up the order and approve the order -->
<script>
    paypal.Buttons({
        createOrder: function() {
            return fetch('<?= $this->route('paypal_sdk_api',['alias' => $this->page->alias, 'method' => 'createorder']); ?>', {
                method: 'post',
                headers: {
                    'content-type': 'application/json'
                }
            }).then(function(res) {
                return res.json();
            }).then(function(data) {
                return data.id; // Use the key sent by your server's response, ex. 'id' or 'token'
            });
        },
        onApprove: function(data, actions) {
            console.log(data);
            return fetch('<?= $this->route('paypal_sdk_api',['alias' => $this->page->alias, 'method' => 'getorder']); ?>?order_id='+data.orderID, {
                headers: {
                    'content-type': 'application/json'
                }
            }).then(function(res) {
                return res.json();
            }).then(function(details) {
            });
        }
    }).render('#paypal-button-container'); // Display payment options on your web page
</script>